@using RateYourShowMVC.Models;
@model IEnumerable<RateYourShowMVC.Models.Publicacao>

@{
    ViewBag.Title = "Dashboard";
    Layout = Layout;
    IEnumerable<RateYourShowMVC.Models.Series> series = ViewBag.Series;
    IEnumerable<RateYourShowMVC.Models.Amizade> amizades = ViewBag.Amizades;
    IEnumerable<RateYourShowMVC.Models.Usuario> usuarios = ViewBag.Pessoa;

    int cont = 1;
    Boolean existe = false;
}
<!-- ... end Responsive Header-BP -->
<div class="header-spacer"></div>


<div class="container">
    <div class="row">


        <!-- Main Content -->

        <main class="col col-xl-6 order-xl-2 col-lg-12 order-lg-1 col-md-12 col-sm-12 col-12">
               <div class="ui-block">
                <!-- News Feed Form  -->

                <div class="news-feed-form">
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active inline-items" data-toggle="tab" href="#home-1" role="tab" aria-expanded="true">

                                <svg class="olymp-status-icon"><use xlink:href="~/svg-icons/sprites/icons.svg#olymp-status-icon"></use></svg>

                                <span>Postagem</span>
                            </a>
                        </li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div class="tab-pane active" id="home-1" role="tabpanel" aria-expanded="true">
                            @using (Html.BeginForm("Index", "LandingPage", FormMethod.Post, htmlAttributes: new { }))
                            {
                                <div class="author-thumb">
                                    <img src="~/Uploads/@ViewBag.Imagem" style="width:36px;height:36px;">
                                </div>
                                <div class="form-group with-icon label-floating is-empty">
                                    <textarea class="form-control" id="texto" name="texto" placeholder=""></textarea>
                                </div>
                                <div class="add-options-message">
                                    <button class="btn btn-primary btn-md-2" type="submit">Realizar Postagem</button>
                                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                </div>

                            }
                        </div>

                        <div class="tab-pane" id="profile-1" role="tabpanel" aria-expanded="true">
                            <form>
                                <div class="author-thumb">
                                    <img src="~/Uploads/@ViewBag.Imagem" style="width:36px;height:36px;">
                                </div>
                                <div class="form-group with-icon label-floating is-empty">
                                    <label class="control-label">Share what you are thinking here...</label>
                                    <textarea class="form-control" placeholder=""></textarea>
                                </div>
                                <div class="add-options-message">
                                    <a href="#" class="options-message" data-toggle="tooltip" data-placement="top" data-original-title="ADD PHOTOS">
                                        <svg class="olymp-camera-icon" data-toggle="modal" data-target="#update-header-photo"><use xlink:href="svg-icons/sprites/icons.svg#olymp-camera-icon"></use></svg>
                                    </a>
                                    <a href="#" class="options-message" data-toggle="tooltip" data-placement="top" data-original-title="TAG YOUR FRIENDS">
                                        <svg class="olymp-computer-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-computer-icon"></use></svg>
                                    </a>

                                    <a href="#" class="options-message" data-toggle="tooltip" data-placement="top" data-original-title="ADD LOCATION">
                                        <svg class="olymp-small-pin-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-small-pin-icon"></use></svg>
                                    </a>

                                    <button class="btn btn-primary btn-md-2">Post Status</button>
                                    <button class="btn btn-md-2 btn-border-think btn-transparent c-grey">Preview</button>

                                </div>

                            </form>
                        </div>



                        <div class="tab-pane" id="blog" role="tabpanel" aria-expanded="true">
                            <form>
                                <div class="author-thumb">
                                    <img src="~/Uploads/@ViewBag.Imagem" style="width:36px;height:36px;">
                                </div>
                                <div class="form-group with-icon label-floating is-empty">
                                    <label class="control-label">Share what you are thinking here...</label>
                                    <textarea class="form-control" placeholder=""></textarea>
                                </div>
                                <div class="add-options-message">
                                    <a href="#" class="options-message" data-toggle="tooltip" data-placement="top" data-original-title="ADD PHOTOS">
                                        <svg class="olymp-camera-icon" data-toggle="modal" data-target="#update-header-photo"><use xlink:href="svg-icons/sprites/icons.svg#olymp-camera-icon"></use></svg>
                                    </a>
                                    <a href="#" class="options-message" data-toggle="tooltip" data-placement="top" data-original-title="TAG YOUR FRIENDS">
                                        <svg class="olymp-computer-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-computer-icon"></use></svg>
                                    </a>

                                    <a href="#" class="options-message" data-toggle="tooltip" data-placement="top" data-original-title="ADD LOCATION">
                                        <svg class="olymp-small-pin-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-small-pin-icon"></use></svg>
                                    </a>

                                    <button class="btn btn-primary btn-md-2">Post Status</button>
                                    <button class="btn btn-md-2 btn-border-think btn-transparent c-grey">Preview</button>

                                </div>

                            </form>
                        </div>
                    </div>
                </div>
                <!-- ... end News Feed Form  -->
            </div>



            <div id="newsfeed-items-grid">

                

                <div class="ui-block">


                    <article class="hentry post">

                        <div class="post__author author vcard inline-items">
                            <img src="~/img/avatar10-sm.jpg" alt="author">

                            <div class="author-date">
                                <a class="h6 post__author-name fn" href="#">Elaine Dreyfuss</a>
                                <div class="post__date">
                                    <time class="published" datetime="2004-07-24T18:18">
                                        9 hours ago
                                    </time>
                                </div>
                            </div>

                            <div class="more">
                                <svg class="olymp-three-dots-icon"><use xlink:href="~/svg-icons/sprites/icons.svg#olymp-three-dots-icon"></use></svg>
                                <ul class="more-dropdown">
                                    <li>
                                        <a data-toggle="modal" data-target="#editar-post" href="#">Editar Post</a>
                                    </li>
                                    <li>
                                        <a href="#">Deletar Post</a>
                                    </li>
                                    <li>
                                        <a href="#">Denunciar Post</a>
                                    </li>                                    
                                </ul>
                            </div>

                        </div>

                        <p>
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempo incididunt ut
                            labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris consequat.
                        </p>

                        <div class="post-additional-info inline-items">

                            <a href="#" class="post-add-icon inline-items">
                                <svg class="olymp-heart-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-heart-icon"></use></svg>
                                <span>24</span>
                            </a>

                            <ul class="friends-harmonic">
                                <li>
                                    <a href="#">
                                        <img src="img/friend-harmonic7.jpg" alt="friend">
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <img src="img/friend-harmonic8.jpg" alt="friend">
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <img src="img/friend-harmonic9.jpg" alt="friend">
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <img src="img/friend-harmonic10.jpg" alt="friend">
                                    </a>
                                </li>
                                <li>
                                    <a href="#">
                                        <img src="img/friend-harmonic11.jpg" alt="friend">
                                    </a>
                                </li>
                            </ul>

                            <div class="names-people-likes">
                                <a href="#">You</a>, <a href="#">Elaine</a> and
                                <br>22 more liked this
                            </div>


                            <div class="comments-shared">
                                <a href="#" class="post-add-icon inline-items">
                                    <svg class="olymp-speech-balloon-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-speech-balloon-icon"></use></svg>
                                    <span>17</span>
                                </a>

                                <a href="#" class="post-add-icon inline-items">
                                    <svg class="olymp-share-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-share-icon"></use></svg>
                                    <span>24</span>
                                </a>
                            </div>


                        </div>

                        <div class="control-block-button post-control-button">

                            <a href="#" class="btn btn-control">
                                <svg class="olymp-like-post-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-like-post-icon"></use></svg>
                            </a>

                            <a href="#" class="btn btn-control">
                                <svg class="olymp-comments-post-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-comments-post-icon"></use></svg>
                            </a>

                            <a href="#" class="btn btn-control">
                                <svg class="olymp-share-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-share-icon"></use></svg>
                            </a>

                        </div>

                    </article>

                    <!-- Comments -->

                    <ul class="comments-list">
                        <li class="comment-item">
                            <div class="post__author author vcard inline-items">
                                <img src="img/author-page.jpg" alt="author">

                                <div class="author-date">
                                    <a class="h6 post__author-name fn" href="02-ProfilePage.html">James Spiegel</a>
                                    <div class="post__date">
                                        <time class="published" datetime="2004-07-24T18:18">
                                            38 mins ago
                                        </time>
                                    </div>
                                </div>

                                <a href="#" class="more"><svg class="olymp-three-dots-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-three-dots-icon"></use></svg></a>

                            </div>

                            <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium der doloremque laudantium.</p>

                            <a href="#" class="post-add-icon inline-items">
                                <svg class="olymp-heart-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-heart-icon"></use></svg>
                                <span>3</span>
                            </a>
                            <a href="#" class="reply">Reply</a>
                        </li>
                        <li class="comment-item">
                            <div class="post__author author vcard inline-items">
                                <img src="img/avatar1-sm.jpg" alt="author">

                                <div class="author-date">
                                    <a class="h6 post__author-name fn" href="#">Mathilda Brinker</a>
                                    <div class="post__date">
                                        <time class="published" datetime="2004-07-24T18:18">
                                            1 hour ago
                                        </time>
                                    </div>
                                </div>

                                <a href="#" class="more"><svg class="olymp-three-dots-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-three-dots-icon"></use></svg></a>

                            </div>

                            <p>
                                Ratione voluptatem sequi en lod nesciunt. Neque porro quisquam est, quinder dolorem ipsum
                                quia dolor sit amet, consectetur adipisci velit en lorem ipsum duis aute irure dolor in reprehenderit in voluptate velit esse cillum.
                            </p>

                            <a href="#" class="post-add-icon inline-items">
                                <svg class="olymp-heart-icon"><use xlink:href="svg-icons/sprites/icons.svg#olymp-heart-icon"></use></svg>
                                <span>8</span>
                            </a>
                            <a href="#" class="reply">Reply</a>
                        </li>
                    </ul>

                    <!-- ... end Comments -->

                    <a href="#" class="more-comments">View more comments <span>+</span></a>


                    <!-- Comment Form  -->

                    <form class="comment-form inline-items">

                        <div class="post__author author vcard inline-items">
                            <img src="img/author-page.jpg" alt="author">

                            <div class="form-group with-icon-right ">
                                <textarea class="form-control" placeholder=""></textarea>
                                <div class="add-options-message">
                                    <a href="#" class="options-message" data-toggle="modal" data-target="#update-header-photo">
                                        <svg class="olymp-camera-icon">
                                            <use xlink:href="svg-icons/sprites/icons.svg#olymp-camera-icon"></use>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>

                        <button class="btn btn-md-2 btn-primary">Post Comment</button>

                        <button class="btn btn-md-2 btn-border-think c-grey btn-transparent custom-color">Cancel</button>

                    </form>

                    <!-- ... end Comment Form  -->
                </div>

               

            </div>



            <!-- Post -->
            @foreach (var amz in amizades.Where(a => a.UsuarioId1 == ViewBag.Usuario.UsuarioId && a.Status == Status.Aceito || a.UsuarioId2 == ViewBag.Usuario.UsuarioId && a.Status == Status.Aceito))
            {
                foreach (var post in Model.Where(p => p.UsuarioId == amz.UsuarioId1 || p.UsuarioId == amz.UsuarioId2 && p.Usuario.Bloqueado != Bloqueado.Sim && p.Usuario.Inativo != Inativo.Sim).OrderByDescending(p => p.Data))
                {
                    <div id="newsfeed-items-grid">
                        <div class="ui-block">
                            <article class="hentry post video">
                                <div class="post__author author vcard inline-items">
                                    @foreach (var mid in post.Usuario.Midia.Where(m => m.TipoMidiaId == 5))
                                    {
                                        <img src="~/Uploads/@mid.Link" alt="author">
                                    }
                                    <div class="author-date">
                                        @Html.ActionLink(post.Usuario.Nome, "PerfilAmigo", "Series", new { id = post.Usuario.UsuarioId }, htmlAttributes: new { @class = "h6 post__author-name fn" })
                                        <div class="post__date">
                                            <time class="published" datetime="2004-07-24T18:18">
                                                @post.Data
                                            </time>
                                        </div>
                                    </div>
                                </div>
                                <p>@post.Descricao</p>
                            </article>
                        </div>
                    </div>
                }
            }
            @foreach (var post in Model.Where(p => p.UsuarioId == 4).OrderByDescending(p => p.Data))
            {
                <div id="newsfeed-items-grid">
                    <div class="ui-block">
                        <article class="hentry post video">
                            <div class="post__author author vcard inline-items">
                                @foreach (var mid in post.Usuario.Midia.Where(m => m.TipoMidiaId == 5))
                                {
                                    <img src="~/Uploads/@mid.Link" alt="author">
                                }
                                <div class="author-date">
                                    <a class="h6 post__author-name fn" href="#">@post.Usuario.Nome</a>
                                </div>
                            </div>
                            <p>@post.Descricao</p>
                        </article>
                    </div>
                </div>
            }
            <!-- End Post -->

            <a id="load-more-button" href="#" class="btn btn-control btn-more" data-load-link="items-to-load.html" data-container="newsfeed-items-grid"><svg class="olymp-three-dots-icon"><use xlink:href="~/svg-icons/sprites/icons.svg#olymp-three-dots-icon"></use></svg></a>

        </main>

        <!-- ... end Main Content -->
        <!-- Left Sidebar -->

        <aside class="col col-xl-3 order-xl-1 col-lg-6 order-lg-2 col-md-6 col-sm-12 col-12">

            <div class="ui-block">
                <div class="ui-block-title">
                    <h6 class="title">Séries Recentes</h6>
                </div>

                <!-- W-Friend-Pages-Added -->
                <ul class="widget w-friend-pages-added notification-list friend-requests">
                    @foreach (var ser in series.OrderByDescending(m => m.SeriesId))
                    {
                        cont++;
                        <li class="inline-items">
                            <div class="author-thumb">
                                @foreach (var mid in ser.Midia.Where(m => m.TipoMidiaId == 1))
                                {
                                    <img src="~/Uploads/@mid.Link" style="height:36px;width:36px" stalt="photo">
                                }
                            </div>
                            <div class="notification-event">
                                @Html.ActionLink(ser.Nome, "Perfil", "Series", new { id = ser.SeriesId }, htmlAttributes: new { @class = "h6" })
                            </div>
                        </li>
                        if (cont > 5)
                        {
                            cont = 1;
                            break;
                        }
                    }

                </ul>
                <!-- .. end W-Friend-Pages-Added -->
            </div>
        </aside>

        <!-- ... end Left Sidebar -->
        <!-- Right Sidebar -->

        <aside class="col col-xl-3 order-xl-3 col-lg-6 order-lg-3 col-md-6 col-sm-12 col-12">



            <div class="ui-block">
                <div class="ui-block-title">
                    <h6 class="title">Sugestão de amigos</h6>
                </div>



                <!-- W-Action -->

                <ul class="widget w-friend-pages-added notification-list friend-requests">

                    @foreach (var pes in usuarios.Where(u => u.UsuarioId != 4 && u.Bloqueado != Bloqueado.Sim && u.UsuarioId != ViewBag.Usuario.UsuarioId))
                    {
                        foreach (var amz in amizades.Where(a => a.UsuarioId1 == ViewBag.Usuario.UsuarioId && a.Status == Status.Aceito || a.UsuarioId2 == ViewBag.Usuario.UsuarioId))
                        {
                            if (pes.UsuarioId == amz.UsuarioId1 || pes.UsuarioId == amz.UsuarioId2)
                            {
                                existe = true;
                            }
                        }

                        if (existe)
                        {
                            existe = false;
                            continue;
                        }

                        cont++;
                        <li class="inline-items">
                            <div class="author-thumb">
                                @foreach (var mid in pes.Midia.Where(m => m.TipoMidiaId == 5))
                                {
                                    <img src="~/Uploads/@mid.Link" style="height:36px;width:36px" stalt="photo">
                                }
                            </div>
                            <div class="notification-event">
                                @Html.ActionLink(pes.Nome, "PerfilAmigo", "Series", new { id = pes.UsuarioId }, htmlAttributes: new { @class = "h6" })
                            </div>
                        </li>
                        if (cont > 5)
                        {
                            break;
                        }
                    }

                </ul>

                <!-- ... end W-Action -->
            </div>

            <div class="ui-block">

                <div class="ui-block-title">
                    <h6 class="title">Atividade de amigos</h6>
                </div>

                <ul class="widget w-friend-pages-added notification-list friend-requests"></ul>

            </div>
        </aside>

        <!-- ... end Right Sidebar -->

    </div>
</div>


<!-- Window-popup Update Header Photo -->

  <!-- desativarConta Popup -->

<div class="modal fade" id="editar-post" tabindex="-1" role="dialog" aria-labelledby="editar-post" aria-hidden="true" style="margin: 7em;">

    <div class="modal-dialog window-popup editar-post" role="document">

        <div class="modal-content">

            <a href="#" class="close icon-close" data-dismiss="modal" aria-label="Close">
                <svg class="olymp-close-icon">
                    <use xlink:href="~/svg-icons/sprites/icons.svg#olymp-close-icon"></use>
                </svg>
            </a>
            
                <div class="modal-body">
                    
                        <article class="hentry post has-post-thumbnail thumb-full-width">
                            <div class="col col-xl-11 order-xl-11 col-lg-11 order-lg-11 col-md-11 col-sm-11 col-11">
                                <div class="post__author author vcard inline-items">
                                    <img src="~/img/author-page.jpg" alt="author">

                                    <div class="author-date">
                                        <a class="h6 post__author-name fn" href="02-ProfilePage.html">James Spiegel</a>
                                    </div>

                               
                                </div>

                                <p>
                                    Lorem ipsum dolor sit amet, consectadipisicing elit, sed do eiusmod por incidid ut labore et
                                    dolore magna aliqua. Ut enim ad minim veniam, quis nostrud lorem exercitation ullamco laboris
                                    nisi ut aliquip ex ea commodo consequat.
                                </p>

                                <p>
                                    Duis en aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                                    Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                    Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem
                                    aperiam, eaque ipsa quae ab illo inventore veri
                                </p>
                            </div>
                    <div class="control-block-button post-control-button">

                        <button class="btn btn-control">
                            <i class="fas fa-check"></i>
                        </button>

                        <button class="btn btn-control">
                            <i class="fas fa-times"></i>
                        </button>
                        

                    </div>

                </article>




            </div>
        </div>
    </div>
</div>
